<?php

namespace App\Http\Controllers;

use App\Models\JiraIssue;
use App\Models\JiraUser;
use App\Models\Log;
use App\Models\Subscriber;
use App\Notifications\MyTelegramNotification;
use Carbon\Carbon;
use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Bus\DispatchesJobs;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Http\Request;
use Illuminate\Routing\Controller as BaseController;
use Illuminate\Support\Facades\Notification;
use WeStacks\TeleBot\TeleBot;
use WeStacks\TeleBot\Objects\User;

class BotController extends BaseController
{
    public $changelog;

    public $data = [];

    use AuthorizesRequests, DispatchesJobs, ValidatesRequests;

    public function index()
    {
        $bot = new TeleBot([
            'token' => env('TELEGRAM_BOT_TOKEN'),
            'api_url' => 'https://api.telegram.org',
            'exceptions' => true,
            'async' => false,
            'handlers' => []
        ]);

        /** @var User */
        $user = $bot->getMe();
        //dd($user);


// You may change all config parameters "on the go" using get/set syntax
        $bot->async = true; // Now bot uses A+ promises

        $bot->getMe()->then(function (User $user) {
            var_dump($user);
        })->wait();
    }

    public function parse_jira_users($json)
    {
        if (isset($json->user)) {
            //dd($json->user);
            $jirauser = JiraUser::query()->firstOrCreate([
                'key' => $json->user->key ?? null,
                'name' => $json->user->name ?? null,
                'accountId' => $json->user->accountId ?? null,
                'active' => $json->user->active ?? true,
                'timeZone' => $json->user->timeZone ?? 'Europe/Moscow',
                'displayName' => $json->user->displayName ?? null,
            ]);
        }
    }

    public function jira(Request $req)
    {
//        $link = 'https://klienti.atlassian.net//secure/attachment/10199/321.png';
//        try {
//            $image = fopen($link, 'r');
//        } catch (\Exception $exception) {
//            $image = $link;
//        }
//
//        dd(is_string($image));
        file_put_contents('4.txt', var_export($req->getContent(), true));
        $rawData = file_get_contents("php://input");

        // delete worklog
        //$rawData='{"timestamp":1628768148255,"webhookEvent":"worklog_deleted","worklog":{"self":"https://klienti.atlassian.net/rest/api/2/issue/10379/worklog/10158","author":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=557058%3Abf39af2f-2a15-473b-ba9b-fecfcab48e41","accountId":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41","avatarUrls":{"48x48":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/48","24x24":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/24","16x16":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/16","32x32":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/32"},"displayName":"Veniamin Smorodinsky","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"updateAuthor":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=557058%3Abf39af2f-2a15-473b-ba9b-fecfcab48e41","accountId":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41","avatarUrls":{"48x48":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/48","24x24":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/24","16x16":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/16","32x32":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/32"},"displayName":"Veniamin Smorodinsky","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"created":"2021-08-12T14:35:35.781+0300","updated":"2021-08-12T14:35:35.781+0300","started":"2021-08-12T12:35:28.389+0300","timeSpent":"2h","timeSpentSeconds":7200,"id":"10158","issueId":"10379"}}';

        // change status (status -> status)
//        $rawData='{"timestamp":1628833397385,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_generic","user":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=557058%3Abf39af2f-2a15-473b-ba9b-fecfcab48e41","accountId":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41","avatarUrls":{"48x48":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/48","24x24":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/24","16x16":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/16","32x32":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/32"},"displayName":"Veniamin Smorodinsky","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"issue":{"id":"10446","self":"https://klienti.atlassian.net/rest/api/2/10446","key":"TALK-86","fields":{"statuscategorychangedate":"2021-08-13T08:25:25.660+0300","issuetype":{"self":"https://klienti.atlassian.net/rest/api/2/issuetype/10002","id":"10002","description":"A task that needs to be done.","iconUrl":"https://klienti.atlassian.net/secure/viewavatar?size=medium&avatarId=10318&avatarType=issuetype","name":"Task","subtask":false,"avatarId":10318,"hierarchyLevel":0},"timespent":3600,"customfield_10030":null,"project":{"self":"https://klienti.atlassian.net/rest/api/2/project/10031","id":"10031","key":"TALK","name":"MyTalking","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://klienti.atlassian.net/secure/projectavatar?pid=10031&avatarId=10421","24x24":"https://klienti.atlassian.net/secure/projectavatar?size=small&s=small&pid=10031&avatarId=10421","16x16":"https://klienti.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10031&avatarId=10421","32x32":"https://klienti.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10031&avatarId=10421"}},"customfield_10031":null,"customfield_10032":null,"customfield_10033":null,"fixVersions":[],"customfield_10034":null,"aggregatetimespent":3600,"customfield_10035":null,"resolution":null,"customfield_10036":null,"customfield_10037":null,"customfield_10027":null,"customfield_10028":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60e55212f90dee00694cff7e","accountId":"60e55212f90dee00694cff7e","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","24x24":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","16x16":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","32x32":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png"},"displayName":"Даниил","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"customfield_10029":null,"resolutiondate":null,"workratio":-1,"issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"lastViewed":"2021-08-13T08:23:24.154+0300","watches":{"self":"https://klienti.atlassian.net/rest/api/2/issue/TALK-86/watchers","watchCount":2,"isWatching":true},"created":"2021-07-29T18:27:58.605+0300","customfield_10020":null,"customfield_10021":null,"customfield_10022":"0|i001qc:","priority":{"self":"https://klienti.atlassian.net/rest/api/2/priority/3","iconUrl":"https://klienti.atlassian.net/images/icons/priorities/medium.svg","name":"Обычный","id":"3"},"customfield_10025":null,"customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"Ссылка на родителя доступна только пользователям Jira Premium."}},"customfield_10019":"2021-08-11T21:56:10.829+0300","timeestimate":0,"aggregatetimeoriginalestimate":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60e55212f90dee00694cff7e","accountId":"60e55212f90dee00694cff7e","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","24x24":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","16x16":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","32x32":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png"},"displayName":"Даниил","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"updated":"2021-08-13T08:43:17.361+0300","status":{"self":"https://klienti.atlassian.net/rest/api/2/status/10025","description":"","iconUrl":"https://klienti.atlassian.net/","name":"Selected for Development","id":"10025","statusCategory":{"self":"https://klienti.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[],"timeoriginalestimate":null,"description":"Дублирующие пинги сейчас:\\n\\n* в канал импортированы последние 100 сообщений, канал не активен, сообщения не приходят, но канал все равно опрашивается в цикле\\n\\nДолжно быть:\\n\\n* выгрузка всей истории сообщений, инструмент - api messagesHistory, плюс:\\n** сохранение в базе номера последнего сообщения, выгруженного в предыдущей итерации\\n** если, в ходе импорта по 100 сообщений, достигнут сохраненного номера, то импорт останавливается","customfield_10010":null,"customfield_10014":null,"timetracking":{"remainingEstimate":"0m","timeSpent":"1h","remainingEstimateSeconds":0,"timeSpentSeconds":3600},"customfield_10015":null,"customfield_10005":null,"customfield_10006":null,"security":null,"customfield_10007":null,"customfield_10008":null,"attachment":[],"customfield_10009":null,"aggregatetimeestimate":0,"summary":"Исключение дублирующих пингов API Whatsapp","creator":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60e55212f90dee00694cff7e","accountId":"60e55212f90dee00694cff7e","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","24x24":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","16x16":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","32x32":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png"},"displayName":"Даниил","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60e55212f90dee00694cff7e","accountId":"60e55212f90dee00694cff7e","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","24x24":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","16x16":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png","32x32":"https://secure.gravatar.com/avatar/dab68af54cc1eb6bdf14575a5a389269?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-6.png"},"displayName":"Даниил","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":3600,"total":3600,"percent":100},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":3600,"total":3600,"percent":100},"votes":{"self":"https://klienti.atlassian.net/rest/api/2/issue/TALK-86/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"15469","items":[{"field":"status","fieldtype":"jira","fieldId":"status","from":"4","fromString":"ПЕРЕОТКРЫТА","to":"10025","toString":"Selected for Development"}]}}';

        //comment_deleted (no changelog)
//        $rawData='{"timestamp":1628841899910,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_comment_deleted","user":{"self":"https://jira.invitro.ru/rest/api/2/user?username=vsmorodinskiy","name":"vsmorodinskiy","key":"JIRAUSER66866","emailAddress":"vsmorodinskiy@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER66866&avatarId=16402","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER66866&avatarId=16402","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER66866&avatarId=16402","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER66866&avatarId=16402"},"displayName":"Вениамин Смородинский","active":true,"timeZone":"Europe/Moscow"},"issue":{"id":"81214","self":"https://jira.invitro.ru/rest/api/2/issue/81214","key":"WEB-7157","fields":{"fixVersions":[{"self":"https://jira.invitro.ru/rest/api/2/version/24993","id":"24993","description":"","name":"3.50 13\\\\09","archived":false,"released":false,"releaseDate":"2021-09-13"}],"customfield_11200":null,"customfield_11201":null,"resolution":null,"customfield_11202":null,"customfield_11203":null,"customfield_10500":"0|107pfe:","customfield_12800":null,"customfield_12802":null,"customfield_12801":null,"customfield_10900":null,"lastViewed":"2021-08-13T11:04:59.884+0300","customfield_10100":null,"priority":{"self":"https://jira.invitro.ru/rest/api/2/priority/6","iconUrl":"https://jira.invitro.ru/images/icons/priority_major.gif","name":"Normal","id":"6"},"customfield_12400":null,"labels":[],"timeestimate":0,"aggregatetimeoriginalestimate":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://jira.invitro.ru/rest/api/2/user?username=aostapenko","name":"aostapenko","key":"aostapenko","emailAddress":"aostapenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Остапенко","active":true,"timeZone":"Europe/Moscow"},"status":{"self":"https://jira.invitro.ru/rest/api/2/status/10906","description":"Выпущено в продакшн","iconUrl":"https://jira.invitro.ru/images/icons/statuses/generic.png","name":"Deployed","id":"10906","statusCategory":{"self":"https://jira.invitro.ru/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Выполнено"}},"components":[],"customfield_12111":null,"customfield_12106":null,"customfield_12109":null,"customfield_10601":{"self":"https://jira.invitro.ru/rest/api/2/customFieldOption/10302","value":"Release","id":"10302","disabled":false},"aggregatetimeestimate":0,"creator":{"self":"https://jira.invitro.ru/rest/api/2/user?username=aostapenko","name":"aostapenko","key":"aostapenko","emailAddress":"aostapenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Остапенко","active":true,"timeZone":"Europe/Moscow"},"subtasks":[],"reporter":{"self":"https://jira.invitro.ru/rest/api/2/user?username=aostapenko","name":"aostapenko","key":"aostapenko","emailAddress":"aostapenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Остапенко","active":true,"timeZone":"Europe/Moscow"},"aggregateprogress":{"progress":25200,"total":25200,"percent":100},"customfield_10201":null,"progress":{"progress":25200,"total":25200,"percent":100},"votes":{"self":"https://jira.invitro.ru/rest/api/2/issue/WEB-7157/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":2,"worklogs":[{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/worklog/70726","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"comment":"Тестирование","created":"2021-06-10T17:10:37.694+0300","updated":"2021-06-10T17:10:37.694+0300","started":"2021-06-10T17:10:00.000+0300","timeSpent":"4h 30m","timeSpentSeconds":16200,"id":"70726","issueId":"81214"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/worklog/71158","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"comment":"Перепроверка","created":"2021-06-16T13:59:50.186+0300","updated":"2021-06-16T13:59:50.186+0300","started":"2021-06-16T13:59:00.000+0300","timeSpent":"2h 30m","timeSpentSeconds":9000,"id":"71158","issueId":"81214"}]},"issuetype":{"self":"https://jira.invitro.ru/rest/api/2/issuetype/1","id":"1","description":"","iconUrl":"https://jira.invitro.ru/secure/viewavatar?size=xsmall&avatarId=10903&avatarType=issuetype","name":"Ошибка","subtask":false,"avatarId":10903},"timespent":25200,"project":{"self":"https://jira.invitro.ru/rest/api/2/project/13100","id":"13100","key":"WEB","name":"Сайты Инвитро","projectTypeKey":"software","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/projectavatar?pid=13100&avatarId=14328","24x24":"https://jira.invitro.ru/secure/projectavatar?size=small&pid=13100&avatarId=14328","16x16":"https://jira.invitro.ru/secure/projectavatar?size=xsmall&pid=13100&avatarId=14328","32x32":"https://jira.invitro.ru/secure/projectavatar?size=medium&pid=13100&avatarId=14328"}},"customfield_11000":null,"aggregatetimespent":25200,"customfield_10310":null,"customfield_10311":null,"customfield_11400":null,"resolutiondate":null,"workratio":-1,"watches":{"self":"https://jira.invitro.ru/rest/api/2/issue/WEB-7157/watchers","watchCount":8,"isWatching":true},"created":"2020-09-11T15:31:45.790+0300","customfield_12200":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7ab60059[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1b05bad5[overall=PullRequestOverallBean{stateCount=1, state=\'MERGED\', details=PullRequestOverallDetails{openCount=0, mergedCount=1, declinedCount=0}},byInstanceType={github=com.atlassian.jira.plugin.devstatus.summary.beans.ObjectByInstanceTypeBean@7fd094d3[count=1,name=GitHub]}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@49355aee[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@1730308b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@552bbd5c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2ea6cd26[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4da71036[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5b85c561[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@534c4210[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4b1b6aa2[count=2,lastUpdated=2021-06-09T22:23:34.000+0300,lastUpdatedTimestamp=2021-06-09T22:23:34.000+03:00],byInstanceType={github=com.atlassian.jira.plugin.devstatus.summary.beans.ObjectByInstanceTypeBean@3e48e557[count=2,name=GitHub]}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4b138132[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@7afe0682[count=1,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={github=com.atlassian.jira.plugin.devstatus.summary.beans.ObjectByInstanceTypeBean@6a203d05[count=1,name=GitHub]}]},errors=[],configErrors=[]], devSummaryJson={\\"cachedValue\\":{\\"errors\\":[],\\"configErrors\\":[],\\"summary\\":{\\"pullrequest\\":{\\"overall\\":{\\"count\\":1,\\"lastUpdated\\":\\"2021-06-09T22:23:46.000+0300\\",\\"stateCount\\":1,\\"state\\":\\"MERGED\\",\\"details\\":{\\"openCount\\":0,\\"mergedCount\\":1,\\"declinedCount\\":0,\\"total\\":1},\\"open\\":false},\\"byInstanceType\\":{\\"github\\":{\\"count\\":1,\\"name\\":\\"GitHub\\"}}},\\"build\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"failedBuildCount\\":0,\\"successfulBuildCount\\":0,\\"unknownBuildCount\\":0},\\"byInstanceType\\":{}},\\"review\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"stateCount\\":0,\\"state\\":null,\\"dueDate\\":null,\\"overDue\\":false,\\"completed\\":false},\\"byInstanceType\\":{}},\\"deployment-environment\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"topEnvironments\\":[],\\"showProjects\\":false,\\"successfulCount\\":0},\\"byInstanceType\\":{}},\\"repository\\":{\\"overall\\":{\\"count\\":2,\\"lastUpdated\\":\\"2021-06-09T22:23:34.000+0300\\"},\\"byInstanceType\\":{\\"github\\":{\\"count\\":2,\\"name\\":\\"GitHub\\"}}},\\"branch\\":{\\"overall\\":{\\"count\\":1,\\"lastUpdated\\":null},\\"byInstanceType\\":{\\"github\\":{\\"count\\":1,\\"name\\":\\"GitHub\\"}}}}},\\"isStale\\":false}}","customfield_10300":null,"customfield_12600":null,"updated":"2021-08-13T11:04:59.892+0300","timeoriginalestimate":null,"description":"В настоящее время на invitrofiles.ru действует динамическая квота, из-за которой пользователи не могут использовать сервис для тех целей, для которых он предназначен. Например, хранить фотоотчеты от МО необходимо до 14 дней, и до 2гб размером, но т.к. квота динамическая, то ограничения бывают в 2 дня и <1гб что не подходит пользователям.\\r\\n\\r\\nПрошу изменить логику работы квоты.","customfield_11220":null,"customfield_11221":null,"customfield_11222":null,"customfield_11223":null,"timetracking":{"remainingEstimate":"0m","timeSpent":"7h","remainingEstimateSeconds":0,"timeSpentSeconds":25200},"customfield_11215":null,"customfield_12305":null,"customfield_12701":null,"customfield_10006":"9223372036854775807","customfield_11216":null,"customfield_12304":null,"customfield_10007":null,"customfield_11217":null,"customfield_12703":null,"customfield_10008":null,"customfield_11218":null,"customfield_12702":null,"customfield_11219":null,"attachment":[{"self":"https://jira.invitro.ru/rest/api/2/attachment/140151","id":"140151","filename":"10062021_WEB7157_1.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:06:52.282+0300","size":393766,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/140151/10062021_WEB7157_1.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/140149","id":"140149","filename":"10062021_WEB7157_1.png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:06:45.691+0300","size":52356,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/140149/10062021_WEB7157_1.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/140149/_thumb_140149.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/140152","id":"140152","filename":"10062021_WEB7157.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:06:52.464+0300","size":1263678,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/140152/10062021_WEB7157.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/140150","id":"140150","filename":"10062021_WEB7157.png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:06:45.688+0300","size":54978,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/140150/10062021_WEB7157.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/140150/_thumb_140150.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/140581","id":"140581","filename":"16062021_WEB7157_3.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-16T13:58:48.556+0300","size":288664,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/140581/16062021_WEB7157_3.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/140582","id":"140582","filename":"16062021_WEB7157_4.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-16T13:58:53.170+0300","size":640008,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/140582/16062021_WEB7157_4.mp4"}],"customfield_12705":null,"customfield_12704":null,"customfield_12707":null,"customfield_12706":null,"customfield_12708":null,"summary":"Динамическая квота invitrofiles.ru","customfield_11210":null,"customfield_11211":null,"customfield_12301":null,"customfield_11212":null,"customfield_10003":null,"customfield_11213":null,"customfield_12303":null,"customfield_11214":null,"customfield_10400":null,"customfield_12302":null,"customfield_11204":null,"customfield_11205":null,"customfield_11600":null,"customfield_11206":null,"environment":null,"customfield_11207":null,"customfield_11208":null,"customfield_11209":null,"duedate":null,"comment":{"comments":[{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/172377","id":"172377","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=ovlasenko","name":"ovlasenko","key":"ovlasenko","emailAddress":"ovlasenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Олег Власенко","active":true,"timeZone":"Europe/Moscow"},"body":"[~mreshetnikova] по сообщениям от поддержки, проблема эта долбит пользователей ежедневно. Надо бы выделить ресурсы web-команды и решить проблему.","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=ovlasenko","name":"ovlasenko","key":"ovlasenko","emailAddress":"ovlasenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Олег Власенко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-02-11T11:16:32.775+0300","updated":"2021-02-11T11:16:32.775+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/189151","id":"189151","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"body":"Фикс выехал, можно проверять.\\r\\n\\r\\nОжидаю смоук-тест - убедиться, что фукнционал загрузки работает.\\r\\n\\r\\nСобственно отсутствие \\"динамической квоты\\" можно протестировать загрузив очень максимально большой файл - раньше интерфейс не разрешал хранить большой файл 30 дней, а теперь должен разрешать","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-09T22:28:30.025+0300","updated":"2021-06-09T22:31:50.162+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/189343","id":"189343","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"body":"Проверено на invitrofiles.ru\\r\\nПри загрузке файла 500 МБ и меньше удается файл сохранить на 30 дней.  [^10062021_WEB7157_1.mp4] \\r\\nНайдены следующие неточности:\\r\\n1) Первый раз при загрузке файла размером 8 ГБ сайт выдал сообщение, что файл должен быть не больше 4 ГБ. Далее при загрузке файла меньше 4 ГБ, выдал сообщение, что файл должен быть не больше 3 ГБ. Проблема в корректном отображении максимального объема данных. [^10062021_WEB7157.png], [^10062021_WEB7157_1.png].\\r\\n2) При повторной загрузке файлов, если первый раз была загрузка файла больше. чем максимальный объем(3ГБ)  будет постоянно выскакивать уведомление о том. что файл должен быть не больше 3 ГБ (если это объемный файл). \\r\\n3) При загрузке файла(архива) размером меньше 3ГБ(2900 МБ) данные загружаются полностью. а потом выпадает уведомление об ошибке обработки данных. Запечатлеть не удалось этот момент.\\r\\n4) При загрузке файла размером в 1.5 ГБ не удалось его сохранить, т.к. система писала, что нет прав на редактирование.  [^10062021_WEB7157.mp4] \\r\\n\\r\\n","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:09:27.456+0300","updated":"2021-06-10T17:09:27.456+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/189361","id":"189361","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"body":"Тут есть несколько аспектов:\\r\\n- мы подкрутили только квоту на время хранения. То есть файл независимо объема можно хранить до 30 дней\\r\\n- квоту на размер файла не подкручивали, не увидели её. Подкрутим\\r\\n- ошибки загрузки и ошибки с правами немного пугают, поэтому предлагаю откатиться на предыдущую версию и потестировать пункты 3 и 4 еще раз","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T17:57:31.481+0300","updated":"2021-06-10T17:57:31.481+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/189363","id":"189363","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"body":"Откатили на предыдущую версию.\\r\\nЧтобы понять, связаны ли проблемы загрузки 3 и 4 с фиксом, прошу протестировать эти пункты снова \\r\\n","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-10T18:00:20.566+0300","updated":"2021-06-10T18:00:20.566+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/189847","id":"189847","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"body":"Проверено на invitrofiles.ru\\r\\n3) Сейчас удалось запечатлеть этот момент. но ничего не исправилось.  [^16062021_WEB7157_3.mp4] \\r\\n4) Ограничение прав повторяется  [^16062021_WEB7157_4.mp4] ","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=amanerko","name":"amanerko","key":"JIRAUSER64106","emailAddress":"manerko@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=12129","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=12129","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=12129","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=12129"},"displayName":"Андрей Манерко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-06-16T13:59:08.583+0300","updated":"2021-06-16T13:59:08.583+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/197762","id":"197762","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=atimofeev","name":"atimofeev","key":"atimofeev","emailAddress":"atimofeev@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=atimofeev&avatarId=16205","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=atimofeev&avatarId=16205","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=atimofeev&avatarId=16205","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=atimofeev&avatarId=16205"},"displayName":"Алексей Тимофеев","active":true,"timeZone":"Europe/Moscow"},"body":"[~slavrinenko] [~edmitriev] Обратите пожалуйста внимание на данную задачу.","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=atimofeev","name":"atimofeev","key":"atimofeev","emailAddress":"atimofeev@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=atimofeev&avatarId=16205","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=atimofeev&avatarId=16205","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=atimofeev&avatarId=16205","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=atimofeev&avatarId=16205"},"displayName":"Алексей Тимофеев","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-04T12:43:20.033+0300","updated":"2021-08-04T12:43:20.033+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/197768","id":"197768","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"body":"Для этого конкретного таска есть решение в https://github.com/INVITRO-IT/invitrofiles/pull/92\\r\\n\\r\\nНо мы его не выкатили, потому что этот сервис давно не тестировался, мы не знаем какие баги в нём есть и какие баги вносит новый код.\\r\\n\\r\\nМожем обсудить.\\r\\nИли можем просто выкатить фикс.\\r\\n","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=slavrinenko","name":"slavrinenko","key":"slavrinenko","emailAddress":"slavrinenko@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10120","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10120","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10120","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10120"},"displayName":"Сергей Лавриненко","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-04T12:51:11.037+0300","updated":"2021-08-04T12:51:11.037+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/81214/comment/198776","id":"198776","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=edmitriev","name":"edmitriev","key":"edmitriev","emailAddress":"edmitriev@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=edmitriev&avatarId=14506","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=edmitriev&avatarId=14506","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=edmitriev&avatarId=14506","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=edmitriev&avatarId=14506"},"displayName":"Евгений Дмитриев","active":true,"timeZone":"Europe/Moscow"},"body":"[~slavrinenko], вначале я хотел попросить тебя исправить фикс, а именно отказаться от переименования функции и замены ее на заглушку. Поскольку где-то в коде, могут быть еще места вызова этой функции, и она всегда будет возвращать одно и тоже.\\r\\n\\r\\nОднако, потом я подумал, что это  как раз хорошо, т.к. мы одним махом избавляемся от динамического срока хранения.\\r\\n\\r\\nВ общем, давай попробуем выкатить фикс.","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=edmitriev","name":"edmitriev","key":"edmitriev","emailAddress":"edmitriev@invitro.ru","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=edmitriev&avatarId=14506","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=edmitriev&avatarId=14506","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=edmitriev&avatarId=14506","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=edmitriev&avatarId=14506"},"displayName":"Евгений Дмитриев","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-10T16:11:22.406+0300","updated":"2021-08-10T16:11:22.406+0300"}],"maxResults":9,"total":9,"startAt":0}}}}';

        // video attachment
//        $rawData = '{"timestamp":1628848002510,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_updated","user":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"issue":{"id":"98405","self":"https://jira.invitro.ru/rest/api/2/issue/98405","key":"WEB-9768","fields":{"fixVersions":[{"self":"https://jira.invitro.ru/rest/api/2/version/24991","id":"24991","description":"","name":"3.48 16\\\\08","archived":false,"released":false,"releaseDate":"2021-08-16"}],"customfield_11200":null,"customfield_11201":null,"resolution":null,"customfield_11202":null,"customfield_11203":null,"customfield_10500":"0|10ak36:","customfield_12800":null,"customfield_12802":null,"customfield_12801":null,"customfield_10900":null,"lastViewed":"2021-08-13T11:48:19.369+0300","customfield_10100":null,"priority":{"self":"https://jira.invitro.ru/rest/api/2/priority/6","iconUrl":"https://jira.invitro.ru/images/icons/priority_major.gif","name":"Normal","id":"6"},"customfield_12400":null,"labels":["invitro.ru","www-qa.invitro.ru"],"timeestimate":0,"aggregatetimeoriginalestimate":0,"versions":[],"issuelinks":[{"id":"81776","self":"https://jira.invitro.ru/rest/api/2/issueLink/81776","type":{"id":"10300","name":"Problem/Incident","inward":"is caused by","outward":"causes","self":"https://jira.invitro.ru/rest/api/2/issueLinkType/10300"},"inwardIssue":{"id":"89761","key":"WEB-8673","self":"https://jira.invitro.ru/rest/api/2/issue/89761","fields":{"summary":"Новая форма обратной связи","status":{"self":"https://jira.invitro.ru/rest/api/2/status/10000","description":"","iconUrl":"https://jira.invitro.ru/images/icons/subtask.gif","name":"To Do","id":"10000","statusCategory":{"self":"https://jira.invitro.ru/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://jira.invitro.ru/rest/api/2/priority/3","iconUrl":"https://jira.invitro.ru/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://jira.invitro.ru/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://jira.invitro.ru/secure/viewavatar?size=xsmall&avatarId=10918&avatarType=issuetype","name":"Task","subtask":false,"avatarId":10918}}}}],"assignee":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"status":{"self":"https://jira.invitro.ru/rest/api/2/status/10904","description":"Задача проверяется QA-специалистом","iconUrl":"https://jira.invitro.ru/images/icons/statuses/generic.png","name":"Testing","id":"10904","statusCategory":{"self":"https://jira.invitro.ru/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://jira.invitro.ru/rest/api/2/component/11101","id":"11101","name":"Frontend"}],"customfield_12111":null,"customfield_12106":null,"customfield_12109":null,"customfield_10601":{"self":"https://jira.invitro.ru/rest/api/2/customFieldOption/10700","value":"Test","id":"10700","disabled":false},"aggregatetimeestimate":0,"creator":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"subtasks":[],"reporter":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"aggregateprogress":{"progress":30600,"total":30600,"percent":100},"customfield_10201":null,"progress":{"progress":30600,"total":30600,"percent":100},"votes":{"self":"https://jira.invitro.ru/rest/api/2/issue/WEB-9768/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":3,"worklogs":[{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/worklog/76878","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"comment":"фикс поля город","created":"2021-08-11T16:06:57.774+0300","updated":"2021-08-11T16:06:57.774+0300","started":"2021-08-11T16:06:00.000+0300","timeSpent":"30m","timeSpentSeconds":1800,"id":"76878","issueId":"98405"},{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/worklog/76905","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"comment":"Создание","created":"2021-08-11T17:48:29.141+0300","updated":"2021-08-11T17:48:29.141+0300","started":"2021-08-11T17:48:00.000+0300","timeSpent":"1h","timeSpentSeconds":3600,"id":"76905","issueId":"98405"},{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/worklog/76988","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"comment":"","created":"2021-08-12T17:16:27.254+0300","updated":"2021-08-12T17:25:36.431+0300","started":"2021-08-12T17:16:00.000+0300","timeSpent":"7h","timeSpentSeconds":25200,"id":"76988","issueId":"98405"}]},"issuetype":{"self":"https://jira.invitro.ru/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://jira.invitro.ru/secure/viewavatar?size=xsmall&avatarId=10903&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":10903},"timespent":30600,"project":{"self":"https://jira.invitro.ru/rest/api/2/project/13100","id":"13100","key":"WEB","name":"Сайты Инвитро","projectTypeKey":"software","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/projectavatar?pid=13100&avatarId=14328","24x24":"https://jira.invitro.ru/secure/projectavatar?size=small&pid=13100&avatarId=14328","16x16":"https://jira.invitro.ru/secure/projectavatar?size=xsmall&pid=13100&avatarId=14328","32x32":"https://jira.invitro.ru/secure/projectavatar?size=medium&pid=13100&avatarId=14328"}},"customfield_11000":null,"aggregatetimespent":30600,"customfield_10310":null,"customfield_10311":null,"customfield_11400":null,"resolutiondate":null,"workratio":9223372036854775807,"watches":{"self":"https://jira.invitro.ru/rest/api/2/issue/WEB-9768/watchers","watchCount":4,"isWatching":false},"created":"2021-08-11T14:54:23.130+0300","customfield_12200":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5e026678[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@10db0e14[overall=PullRequestOverallBean{stateCount=2, state=\'MERGED\', details=PullRequestOverallDetails{openCount=0, mergedCount=2, declinedCount=0}},byInstanceType={github=com.atlassian.jira.plugin.devstatus.summary.beans.ObjectByInstanceTypeBean@13b63d4e[count=2,name=GitHub]}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5b553a82[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3385e14b[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38ce5e1b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1a305801[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6843f0ef[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@74d0db15[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3e247d12[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@264cda87[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@517f8229[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@2305f360[count=2,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={github=com.atlassian.jira.plugin.devstatus.summary.beans.ObjectByInstanceTypeBean@3ed4d6ff[count=2,name=GitHub]}]},errors=[],configErrors=[]], devSummaryJson={\\"cachedValue\\":{\\"errors\\":[],\\"configErrors\\":[],\\"summary\\":{\\"pullrequest\\":{\\"overall\\":{\\"count\\":2,\\"lastUpdated\\":\\"2021-08-13T07:48:48.000+0300\\",\\"stateCount\\":2,\\"state\\":\\"MERGED\\",\\"details\\":{\\"openCount\\":0,\\"mergedCount\\":2,\\"declinedCount\\":0,\\"total\\":2},\\"open\\":false},\\"byInstanceType\\":{\\"github\\":{\\"count\\":2,\\"name\\":\\"GitHub\\"}}},\\"build\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"failedBuildCount\\":0,\\"successfulBuildCount\\":0,\\"unknownBuildCount\\":0},\\"byInstanceType\\":{}},\\"review\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"stateCount\\":0,\\"state\\":null,\\"dueDate\\":null,\\"overDue\\":false,\\"completed\\":false},\\"byInstanceType\\":{}},\\"deployment-environment\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null,\\"topEnvironments\\":[],\\"showProjects\\":false,\\"successfulCount\\":0},\\"byInstanceType\\":{}},\\"repository\\":{\\"overall\\":{\\"count\\":0,\\"lastUpdated\\":null},\\"byInstanceType\\":{}},\\"branch\\":{\\"overall\\":{\\"count\\":2,\\"lastUpdated\\":null},\\"byInstanceType\\":{\\"github\\":{\\"count\\":2,\\"name\\":\\"GitHub\\"}}}}},\\"isStale\\":false}}","customfield_10300":null,"customfield_12600":null,"updated":"2021-08-13T12:46:42.501+0300","timeoriginalestimate":0,"description":"*Окружение:* test\\r\\n*Баг из задачи:* WEB-8673\\r\\n*Ссылка:* https://www-qa.invitro.ru/about/feedback/\\r\\n*ТЗ:* https://confluence.invitro.ru/pages/viewpage.action?pageId=902031127\\r\\n\\r\\n*Для всех разделов:*\\r\\n1. Поля \\"ФИО\\" \\"Город\\" \\"Компания\\" принимаются при вводе только пробела.  [^9768 (1).mp4]    [^9768 (1.1).png]\\r\\n2. Поле \\"Дата\\" - датапикер открывается только по клику на иконку календаря, а не при клике в области поля.  [^9768 (2).mp4] \\r\\n3. В поле датапикер подсказка увеличивается и перекрывает часть поля после закрытия датапикера без выбора даты. [^9768 (3).png]\\r\\n4. В поле город которое имеет подсказку, подсказка срабатывает при вводе 1-го символа. Данное поведение не соответствует ТЗ. [^9768 (4).png]\\r\\n\\r\\n*Раздел \\"Задать вопрос\\"*\\r\\n5. Поле телефон без маски не принимает валидные символы из за чего форма не отправляется ( вопрос: Нужна ли нам реализация поля телефон без маски? [~ezubova][~atimofeev] )  [^9768 (5).png]\\r\\n6. Поле ИНЗ с ручным вводом, нет ограничения в 9 цифр [^9768 (6).png]\\r\\n7. Поле ИНЗ с ручным вводом позволяет вводить не только цифры. [^9768 (7).png]\\r\\n\\r\\n*Разделы \\"Пожаловаться\\" \\"Выразить благодарность\\" \\"Предложить идею\\"*\\r\\n8. В поле телефон которое имеет маску. При клике на поле и потере фокуса, подсказка имеет размер меньше остальных подсказок [^9768 (8).png]\\r\\nБаг плавающий, воспроизводится, только при первом заходе и тапе.\\r\\n\\r\\n*Воспроизводитяс:* Windows 10 Chrome 91","customfield_11220":null,"customfield_11221":null,"customfield_11222":null,"customfield_11223":null,"timetracking":{"originalEstimate":"0m","remainingEstimate":"0m","timeSpent":"1d 30m","originalEstimateSeconds":0,"remainingEstimateSeconds":0,"timeSpentSeconds":30600},"customfield_11215":null,"customfield_12305":null,"customfield_12701":null,"customfield_10006":"9223372036854775807","customfield_11216":null,"customfield_12304":null,"customfield_10007":null,"customfield_11217":null,"customfield_12703":null,"customfield_10008":null,"customfield_11218":null,"customfield_12702":null,"customfield_11219":null,"attachment":[{"self":"https://jira.invitro.ru/rest/api/2/attachment/148576","id":"148576","filename":"9768 (1.1).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.311+0300","size":101303,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148576/9768+%281.1%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148576/_thumb_148576.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148578","id":"148578","filename":"9768 (1).mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:38.756+0300","size":1298783,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148578/9768+%281%29.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148577","id":"148577","filename":"9768 (2).mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:38.645+0300","size":1421010,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148577/9768+%282%29.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148570","id":"148570","filename":"9768 (3).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.175+0300","size":77676,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148570/9768+%283%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148570/_thumb_148570.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148571","id":"148571","filename":"9768 (4).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.260+0300","size":96880,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148571/9768+%284%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148571/_thumb_148571.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148572","id":"148572","filename":"9768 (5).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.187+0300","size":91926,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148572/9768+%285%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148572/_thumb_148572.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148573","id":"148573","filename":"9768 (6).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.262+0300","size":85995,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148573/9768+%286%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148573/_thumb_148573.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148574","id":"148574","filename":"9768 (7).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.257+0300","size":83388,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148574/9768+%287%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148574/_thumb_148574.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148575","id":"148575","filename":"9768 (8).png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=dnozadze","name":"dnozadze","key":"JIRAUSER62570","emailAddress":"nozadze@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62570&avatarId=16003","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62570&avatarId=16003","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62570&avatarId=16003","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62570&avatarId=16003"},"displayName":"Дмитрий Нозадзе","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:09:32.177+0300","size":80865,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148575/9768+%288%29.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148575/_thumb_148575.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148869","id":"148869","filename":"аа_5839.png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:00:42.175+0300","size":862761,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148869/%D0%B0%D0%B0_5839.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148869/_thumb_148869.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148870","id":"148870","filename":"аа_5840.png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:00:43.212+0300","size":836851,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148870/%D0%B0%D0%B0_5840.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148870/_thumb_148870.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148872","id":"148872","filename":"аа_5841.png","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:04:28.117+0300","size":1467788,"mimeType":"image/png","content":"https://jira.invitro.ru/secure/attachment/148872/%D0%B0%D0%B0_5841.png","thumbnail":"https://jira.invitro.ru/secure/thumbnail/148872/_thumb_148872.png"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148874","id":"148874","filename":"аа_5842.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:08:35.866+0300","size":49129180,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148874/%D0%B0%D0%B0_5842.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148877","id":"148877","filename":"аа_5843.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:33:46.218+0300","size":42158974,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148877/%D0%B0%D0%B0_5843.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148879","id":"148879","filename":"аа_5844.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:36:17.926+0300","size":15380680,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148879/%D0%B0%D0%B0_5844.mp4"},{"self":"https://jira.invitro.ru/rest/api/2/attachment/148880","id":"148880","filename":"аа_5845.mp4","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=idobroslavskaya","name":"idobroslavskaya","key":"JIRAUSER62307","emailAddress":"dobroslavskaya@kavichki.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=JIRAUSER62307&avatarId=15900","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=JIRAUSER62307&avatarId=15900","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=JIRAUSER62307&avatarId=15900","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=JIRAUSER62307&avatarId=15900"},"displayName":"Ирина Доброславская","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-13T12:46:42.432+0300","size":12752857,"mimeType":"video/mp4","content":"https://jira.invitro.ru/secure/attachment/148880/%D0%B0%D0%B0_5845.mp4"}],"customfield_12705":null,"customfield_12704":null,"customfield_12707":null,"customfield_12706":null,"customfield_12708":null,"summary":"Ошибки валидации полей в ФОС","customfield_11210":null,"customfield_11211":null,"customfield_12301":null,"customfield_11212":null,"customfield_10003":null,"customfield_11213":null,"customfield_12303":null,"customfield_11214":null,"customfield_10400":null,"customfield_12302":null,"customfield_11204":null,"customfield_11205":null,"customfield_11600":null,"customfield_11206":null,"environment":null,"customfield_11207":null,"customfield_11208":null,"customfield_11209":null,"duedate":null,"comment":{"comments":[{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/comment/198937","id":"198937","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=ezubova","name":"ezubova","key":"JIRAUSER62376","emailAddress":"elena.repkova@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Елена Зубова","active":true,"timeZone":"Europe/Moscow"},"body":"[~dnozadze] поле Телефон должно быть с маской ввода","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=ezubova","name":"ezubova","key":"JIRAUSER62376","emailAddress":"elena.repkova@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Елена Зубова","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-11T15:42:01.002+0300","updated":"2021-08-11T15:42:01.002+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/comment/199171","id":"199171","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"body":"исправление ошибок валидации полей в ФОС + помощь Алине\\r\\nMR\\r\\nhttps://github.com/INVITRO-IT/invitro-web-newru/pull/11232","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=a.vinokurov","name":"a.vinokurov","key":"JIRAUSER62857","emailAddress":"aleksandr.vinokurov@simbirsoft.com","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?avatarId=10122","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&avatarId=10122","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&avatarId=10122","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&avatarId=10122"},"displayName":"Александр Винокуров","active":true,"timeZone":"Europe/Moscow"},"created":"2021-08-12T17:17:28.252+0300","updated":"2021-08-12T17:17:28.252+0300"},{"self":"https://jira.invitro.ru/rest/api/2/issue/98405/comment/199209","id":"199209","author":{"self":"https://jira.invitro.ru/rest/api/2/user?username=pratanov","name":"pratanov","key":"pratanov","emailAddress":"","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=pratanov&avatarId=15228","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=pratanov&avatarId=15228","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=pratanov&avatarId=15228","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=pratanov&avatarId=15228"},"displayName":"Петр Ратанов","active":true,"timeZone":"Etc/GMT-4"},"body":"Тестировать на www-qa.invitro.ru","updateAuthor":{"self":"https://jira.invitro.ru/rest/api/2/user?username=pratanov","name":"pratanov","key":"pratanov","emailAddress":"","avatarUrls":{"48x48":"https://jira.invitro.ru/secure/useravatar?ownerId=pratanov&avatarId=15228","24x24":"https://jira.invitro.ru/secure/useravatar?size=small&ownerId=pratanov&avatarId=15228","16x16":"https://jira.invitro.ru/secure/useravatar?size=xsmall&ownerId=pratanov&avatarId=15228","32x32":"https://jira.invitro.ru/secure/useravatar?size=medium&ownerId=pratanov&avatarId=15228"},"displayName":"Петр Ратанов","active":true,"timeZone":"Etc/GMT-4"},"created":"2021-08-13T07:49:42.452+0300","updated":"2021-08-13T07:49:42.452+0300"}],"maxResults":3,"total":3,"startAt":0}}},"changelog":{"id":"906004","items":[{"field":"Attachment","fieldtype":"jira","from":null,"fromString":null,"to":"148880","toString":"аа_5845.mp4"}]}}';

        //assignee change (user -> user)
//        $rawData = '{"timestamp":1628853167992,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_assigned","user":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"issue":{"id":"10376","self":"https://klienti.atlassian.net/rest/api/2/10376","key":"CRM-13","fields":{"statuscategorychangedate":"2021-07-16T18:50:38.027+0300","issuetype":{"self":"https://klienti.atlassian.net/rest/api/2/issuetype/10002","id":"10002","description":"A task that needs to be done.","iconUrl":"https://klienti.atlassian.net/secure/viewavatar?size=medium&avatarId=10318&avatarType=issuetype","name":"Task","subtask":false,"avatarId":10318,"hierarchyLevel":0},"timespent":68460,"customfield_10030":null,"project":{"self":"https://klienti.atlassian.net/rest/api/2/project/10027","id":"10027","key":"CRM","name":"CRM","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://klienti.atlassian.net/secure/projectavatar?pid=10027&avatarId=10407","24x24":"https://klienti.atlassian.net/secure/projectavatar?size=small&s=small&pid=10027&avatarId=10407","16x16":"https://klienti.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10027&avatarId=10407","32x32":"https://klienti.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10027&avatarId=10407"}},"customfield_10031":null,"customfield_10032":null,"fixVersions":[],"customfield_10033":null,"aggregatetimespent":68460,"resolution":null,"customfield_10036":100.0,"customfield_10037":"CRM-13","customfield_10027":null,"customfield_10028":null,"customfield_10029":null,"resolutiondate":null,"workratio":190,"watches":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-13/watchers","watchCount":1,"isWatching":true},"lastViewed":"2021-08-13T14:11:53.306+0300","issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"created":"2021-07-16T18:50:37.763+0300","customfield_10020":null,"customfield_10021":null,"customfield_10022":"0|i001xr:","priority":{"self":"https://klienti.atlassian.net/rest/api/2/priority/3","iconUrl":"https://klienti.atlassian.net/images/icons/priorities/medium.svg","name":"Обычный","id":"3"},"customfield_10025":null,"labels":[],"customfield_10026":null,"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"Ссылка на родителя доступна только пользователям Jira Premium."}},"customfield_10019":null,"timeestimate":0,"aggregatetimeoriginalestimate":36000,"versions":[],"issuelinks":[],"assignee":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=557058%3Abf39af2f-2a15-473b-ba9b-fecfcab48e41","accountId":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41","avatarUrls":{"48x48":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/48","24x24":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/24","16x16":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/16","32x32":"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41/381ac727-55c2-48db-ac74-24f7c412762e/32"},"displayName":"Veniamin Smorodinsky","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"updated":"2021-08-13T14:12:47.987+0300","status":{"self":"https://klienti.atlassian.net/rest/api/2/status/10025","description":"","iconUrl":"https://klienti.atlassian.net/","name":"Selected for Development","id":"10025","statusCategory":{"self":"https://klienti.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[],"timeoriginalestimate":36000,"description":"Описание 1","customfield_10010":null,"customfield_10014":null,"customfield_10015":null,"timetracking":{"originalEstimate":"1d 2h","remainingEstimate":"0m","timeSpent":"2d 3h 1m","originalEstimateSeconds":36000,"remainingEstimateSeconds":0,"timeSpentSeconds":68460},"customfield_10005":null,"customfield_10006":null,"customfield_10007":null,"security":null,"customfield_10008":null,"aggregatetimeestimate":0,"attachment":[],"customfield_10009":null,"summary":"Jira Report","creator":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"aggregateprogress":{"progress":68460,"total":68460,"percent":100},"customfield_10000":"{}","customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":68460,"total":68460,"percent":100},"votes":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-13/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"15485","items":[{"field":"assignee","fieldtype":"jira","fieldId":"assignee","from":"60b8a7caa5be0a0069f3301f","fromString":"Сергей","to":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41","toString":"Veniamin Smorodinsky","tmpFromAccountId":"60b8a7caa5be0a0069f3301f","tmpToAccountId":"557058:bf39af2f-2a15-473b-ba9b-fecfcab48e41"}]}}';


        //assignee change (user -> null)
//        $rawData = '{"timestamp":1628854538225,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_assigned","user":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"issue":{"id":"10328","self":"https://klienti.atlassian.net/rest/api/2/10328","key":"CRM-8","fields":{"statuscategorychangedate":"2021-07-06T18:23:08.741+0300","issuetype":{"self":"https://klienti.atlassian.net/rest/api/2/issuetype/10001","id":"10001","description":"Stories track functionality or features expressed as user goals.","iconUrl":"https://klienti.atlassian.net/secure/viewavatar?size=medium&avatarId=10315&avatarType=issuetype","name":"Story","subtask":false,"avatarId":10315,"hierarchyLevel":0},"timespent":32400,"customfield_10030":null,"project":{"self":"https://klienti.atlassian.net/rest/api/2/project/10027","id":"10027","key":"CRM","name":"CRM","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://klienti.atlassian.net/secure/projectavatar?pid=10027&avatarId=10407","24x24":"https://klienti.atlassian.net/secure/projectavatar?size=small&s=small&pid=10027&avatarId=10407","16x16":"https://klienti.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10027&avatarId=10407","32x32":"https://klienti.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10027&avatarId=10407"}},"customfield_10031":null,"customfield_10032":null,"customfield_10033":null,"fixVersions":[],"aggregatetimespent":32400,"resolution":null,"customfield_10036":null,"customfield_10037":null,"customfield_10027":null,"customfield_10028":null,"customfield_10029":null,"resolutiondate":null,"workratio":-1,"watches":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/watchers","watchCount":1,"isWatching":true},"lastViewed":"2021-08-13T14:35:15.915+0300","issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"created":"2021-07-06T18:23:08.506+0300","customfield_10020":null,"customfield_10021":null,"customfield_10022":"0|i001nz:","priority":{"self":"https://klienti.atlassian.net/rest/api/2/priority/3","iconUrl":"https://klienti.atlassian.net/images/icons/priorities/medium.svg","name":"Обычный","id":"3"},"customfield_10025":null,"customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"Ссылка на родителя доступна только пользователям Jira Premium."}},"customfield_10019":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[],"issuelinks":[],"assignee":null,"updated":"2021-08-13T14:35:38.220+0300","status":{"self":"https://klienti.atlassian.net/rest/api/2/status/10025","description":"","iconUrl":"https://klienti.atlassian.net/","name":"Selected for Development","id":"10025","statusCategory":{"self":"https://klienti.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"customfield_10014":null,"customfield_10015":null,"timetracking":{"timeSpent":"1d 1h","timeSpentSeconds":32400},"customfield_10005":null,"customfield_10006":null,"security":null,"customfield_10007":null,"customfield_10008":null,"aggregatetimeestimate":null,"attachment":[],"customfield_10009":null,"summary":"Синхронизация гит","creator":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":32400,"total":32400,"percent":100},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":32400,"total":32400,"percent":100},"votes":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"15492","items":[{"field":"assignee","fieldtype":"jira","fieldId":"assignee","from":"60e55212f90dee00694cff7e","fromString":"Даниил","to":null,"toString":null,"tmpFromAccountId":"60e55212f90dee00694cff7e","tmpToAccountId":null}]}}';

        //attach img
     //   $rawData = '{"timestamp":1628858609290,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_updated","user":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"issue":{"id":"10328","self":"https://klienti.atlassian.net/rest/api/2/10328","key":"CRM-8","fields":{"statuscategorychangedate":"2021-07-06T18:23:08.741+0300","issuetype":{"self":"https://klienti.atlassian.net/rest/api/2/issuetype/10001","id":"10001","description":"Stories track functionality or features expressed as user goals.","iconUrl":"https://klienti.atlassian.net/secure/viewavatar?size=medium&avatarId=10315&avatarType=issuetype","name":"Story","subtask":false,"avatarId":10315,"hierarchyLevel":0},"timespent":32400,"customfield_10030":null,"project":{"self":"https://klienti.atlassian.net/rest/api/2/project/10027","id":"10027","key":"CRM","name":"CRM","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://klienti.atlassian.net/secure/projectavatar?pid=10027&avatarId=10407","24x24":"https://klienti.atlassian.net/secure/projectavatar?size=small&s=small&pid=10027&avatarId=10407","16x16":"https://klienti.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10027&avatarId=10407","32x32":"https://klienti.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10027&avatarId=10407"}},"customfield_10031":null,"customfield_10032":null,"customfield_10033":null,"fixVersions":[],"aggregatetimespent":32400,"resolution":null,"customfield_10036":null,"customfield_10037":null,"customfield_10027":null,"customfield_10028":null,"customfield_10029":null,"resolutiondate":null,"workratio":-1,"watches":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/watchers","watchCount":1,"isWatching":true},"lastViewed":"2021-08-13T14:35:15.915+0300","issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"created":"2021-07-06T18:23:08.506+0300","customfield_10020":null,"customfield_10021":null,"customfield_10022":"0|i001nz:","priority":{"self":"https://klienti.atlassian.net/rest/api/2/priority/3","iconUrl":"https://klienti.atlassian.net/images/icons/priorities/medium.svg","name":"Обычный","id":"3"},"customfield_10025":null,"customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"Ссылка на родителя доступна только пользователям Jira Premium."}},"customfield_10019":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"updated":"2021-08-13T15:43:29.284+0300","status":{"self":"https://klienti.atlassian.net/rest/api/2/status/10025","description":"","iconUrl":"https://klienti.atlassian.net/","name":"Selected for Development","id":"10025","statusCategory":{"self":"https://klienti.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"customfield_10014":null,"customfield_10015":null,"timetracking":{"timeSpent":"1d 1h","timeSpentSeconds":32400},"customfield_10005":null,"customfield_10006":null,"security":null,"customfield_10007":null,"customfield_10008":null,"attachment":[{"self":"https://klienti.atlassian.net/rest/api/2/attachment/10192","id":"10192","filename":"1.png","author":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"created":"2021-08-13T15:43:28.790+0300","size":17319,"mimeType":"image/png","content":"https://klienti.atlassian.net/secure/attachment/10192/1.png","thumbnail":"https://klienti.atlassian.net/secure/thumbnail/10192/1.png"}],"customfield_10009":null,"aggregatetimeestimate":null,"summary":"Синхронизация гит","creator":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":32400,"total":32400,"percent":100},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":32400,"total":32400,"percent":100},"votes":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"15507","items":[{"field":"Attachment","fieldtype":"jira","fieldId":"attachment","from":null,"fromString":null,"to":"10192","toString":"1.png"}]}}';

        //delete img
//        $rawData = '{"timestamp":1628858393430,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_updated","user":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"issue":{"id":"10328","self":"https://klienti.atlassian.net/rest/api/2/10328","key":"CRM-8","fields":{"statuscategorychangedate":"2021-07-06T18:23:08.741+0300","issuetype":{"self":"https://klienti.atlassian.net/rest/api/2/issuetype/10001","id":"10001","description":"Stories track functionality or features expressed as user goals.","iconUrl":"https://klienti.atlassian.net/secure/viewavatar?size=medium&avatarId=10315&avatarType=issuetype","name":"Story","subtask":false,"avatarId":10315,"hierarchyLevel":0},"timespent":32400,"customfield_10030":null,"project":{"self":"https://klienti.atlassian.net/rest/api/2/project/10027","id":"10027","key":"CRM","name":"CRM","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://klienti.atlassian.net/secure/projectavatar?pid=10027&avatarId=10407","24x24":"https://klienti.atlassian.net/secure/projectavatar?size=small&s=small&pid=10027&avatarId=10407","16x16":"https://klienti.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10027&avatarId=10407","32x32":"https://klienti.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10027&avatarId=10407"}},"customfield_10031":null,"customfield_10032":null,"fixVersions":[],"customfield_10033":null,"aggregatetimespent":32400,"resolution":null,"customfield_10036":null,"customfield_10037":null,"customfield_10027":null,"customfield_10028":null,"customfield_10029":null,"resolutiondate":null,"workratio":-1,"issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"lastViewed":"2021-08-13T14:35:15.915+0300","watches":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/watchers","watchCount":1,"isWatching":true},"created":"2021-07-06T18:23:08.506+0300","customfield_10020":null,"customfield_10021":null,"customfield_10022":"0|i001nz:","priority":{"self":"https://klienti.atlassian.net/rest/api/2/priority/3","iconUrl":"https://klienti.atlassian.net/images/icons/priorities/medium.svg","name":"Обычный","id":"3"},"customfield_10025":null,"customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"Ссылка на родителя доступна только пользователям Jira Premium."}},"customfield_10019":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"updated":"2021-08-13T15:39:53.426+0300","status":{"self":"https://klienti.atlassian.net/rest/api/2/status/10025","description":"","iconUrl":"https://klienti.atlassian.net/","name":"Selected for Development","id":"10025","statusCategory":{"self":"https://klienti.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"customfield_10014":null,"timetracking":{"timeSpent":"1d 1h","timeSpentSeconds":32400},"customfield_10015":null,"customfield_10005":null,"customfield_10006":null,"customfield_10007":null,"security":null,"customfield_10008":null,"customfield_10009":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Синхронизация гит","creator":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://klienti.atlassian.net/rest/api/2/user?accountId=60b8a7caa5be0a0069f3301f","accountId":"60b8a7caa5be0a0069f3301f","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","24x24":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","16x16":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png","32x32":"https://secure.gravatar.com/avatar/7e315a592a33b9328be361bdf0d504a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Fdefault-avatar-3.png"},"displayName":"Сергей","active":true,"timeZone":"Europe/Moscow","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":32400,"total":32400,"percent":100},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":32400,"total":32400,"percent":100},"votes":{"self":"https://klienti.atlassian.net/rest/api/2/issue/CRM-8/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"15503","items":[{"field":"Attachment","fieldtype":"jira","fieldId":"attachment","from":"10191","fromString":"1.png","to":null,"toString":null}]}}';

        $f = var_export($_REQUEST, true);
        file_put_contents('1.txt', $rawData);
        file_put_contents('2.txt', $f);
        $jsonData = json_decode($rawData, true);
        $json = json_decode($rawData);
        $f2 = var_export($jsonData, true);
        file_put_contents('3.txt', $f2);
//----------

        $this->parse_jira_users($json);

        $webhook_parts = explode('_', $json->webhookEvent);

        $log_message_header = '';
        $log_message_body = '';

        $this->parseChangelog($json->changelog->items);

        if ($webhook_parts[0] == 'worklog') {
            $issue_id = $json->worklog->issueId;

            $log_message_header = '{action} записи о работе от ' . $json->worklog->author->displayName . ' ' . $json->worklog->timeSpent . " " .
                Carbon::createFromTimeString($json->worklog->created)->toDateString();

            $log_message_body .= "Комментарий к работе: {$json->worklog->comment}\n";
        }

        if ($webhook_parts[0] == 'comment') {
            $issue_id = $json->issue->id;
            $log_message_header = "{action} комментария #" . $json->comment->id . ' от пользователя ' . $json->comment->updateAuthor->displayName . "\r\n\r\n" .
                "------\r\n" . $json->comment->body;

        }

        if ($webhook_parts[0] == 'jira:issue') {
            $issue_id = $json->issue->id;
            $assignee = $this->getAssignee($json->issue->fields->assignee->displayName ?? null);
            $status = $this->getStatus($json->issue->fields->status->name ?? null);
            $log_message_header = "{$assignee}{$status}{action} задачи пользователем {$json->user->displayName}.\n";

        }

        if ($webhook_parts[1] == 'created') {
            $log_message_header = str_replace('{action}', '📌Создание', $log_message_header);
        } elseif ($webhook_parts[1] == 'updated') {
            $log_message_header = str_replace('{action}', '✏Изменение', $log_message_header);
        } elseif ($webhook_parts[1] == 'deleted') {
            $log_message_header = str_replace('{action}', '❌Удаление', $log_message_header);
        } else {
            $log_message_header = str_replace('{action}', $json->webhookEvent, $log_message_header);
        }

        if (!empty($this->changelog)) {
            $log_message_body .= "Изменения: ";
            foreach ($this->changelog as $field => $change) {
                if (empty($change['from']) && !empty($change['to'])) {
                    $log_message_body .= "\nПоле {$field}\nНовое значение\n{$change['to']}\n";
                } elseif (!empty($change['from'] && empty($change['to']))) {
                    $log_message_body .= "\n❌Поле {$field} удалено\nБыло\n\"{$change['from']}\"";
                } else {
                    $log_message_body .= "\nПоле {$field}\nБыло\n\"{$change['from']}\"\nСтало\n\"{$change['to']}\"";
                }
            }
        }

        if (isset($json->issue_event_type_name)) {
            $eventTypeName = $this->getIssueEventTypeName($json->issue_event_type_name);
            if (!empty($this->changelog) || strpos($eventTypeName, 'deleted') !== false) {
                $log_message_body = $eventTypeName . $log_message_body;
            }
        }

        $this->data['log_message_body'] = $log_message_body;
        $this->data['log_message_header'] = $log_message_header;

        $issue = JiraIssue::query()->where('issue_id', '=', $issue_id)->first();

        if (!$issue) {

            if (isset($json->issue->key)) {
                $issue_key = $json->issue->key;
            } else {
                $issue_key = "NOT-01";
            }

            $issue = JiraIssue::query()->create(
                [
                    'key' => $issue_key,
                    'issue_id' => $issue_id,
                    'event_created' => Carbon::createFromTimestamp($json->timestamp)->toDateTimeString(),
                    //'updateAuthor' => $json->updateAuthor,
                    'webhookEvent' => $json->webhookEvent,
                    'issue_url' => env('JIRA_URL') . 'browse/' . $issue_key,
                    'summary' => $json->issue->fields->summary ?? null,
                    'src' => $rawData,
                ]);

            Log::create([
                'issue_id' => $issue_id,
                'issue_key' => $issue_key,
                'webhook_event' => $json->webhookEvent,
                'name' => $log_message_header,
                'body' => $log_message_body,
                'src' => $rawData,
            ]);
        } else {

            Log::create([
                'issue_id' => $issue_id,
                'issue_key' => $issue->key,
                'webhook_event' => $json->webhookEvent,
                'name' => $log_message_header,
                'body' => $log_message_body,
                'src' => $rawData,
            ]);

            $issue->issue_id = $issue_id;
            $issue->event_created = Carbon::createFromTimestamp($json->timestamp)->toDateTimeString();
            $issue->webhookEvent = $json->webhookEvent;
            $issue->src = $rawData;

            if ($webhook_parts[0] != 'worklog') {
                $issue->key = $json->issue->key;
                $issue->issue_url = env('JIRA_URL') . 'browse/' . $json->issue->key;
                $issue->summary = $json->issue->fields->summary;
            }

            $issue->save();
        }

        $issue = JiraIssue::query()->where('issue_id', '=', $issue_id)->first();

        dd(view('telegram.notification', [
            'issue' => $issue,
            'message_header' => $log_message_header,
            'message_body' => $log_message_body
        ])->render());
        $message_data = compact('log_message_body', 'log_message_header');
        $subscribers = Subscriber::where('is_active', '=', true)->get();
        foreach ($subscribers as $subscriber) {
            Notification::send($subscriber, new MyTelegramNotification($issue, $this->data));
        }
    }

    public function parseChangelog($changelog)
    {
        foreach ($changelog as $key => $item) {
            switch ($item->field) {
                case 'Attachment':
                    $link = env('JIRA_URL') . "/secure/attachment/{$item->to}/{$item->toString}";
//                    preg_match('~^https?://\S+(?:jpg|jpeg|png)$~', $link, $match);
//                    if ($match) {
//                        try {
//                            $image = fopen($link, 'r');
//                        } catch (\Exception $exception) {
//                            $image = $link;
//                        }
//                    }
//                    if (!empty($match)) {
//                        $this->data['image'][] = $link;
//                        break;
//                    }
                    if (!empty($item->to)) {
                        $this->changelog[$item->field]['to'] = "<a href='{$link}' style='margin-right: 5px;'>{$item->toString}</a>";
                    }
                    if (!empty($item->fromString)) {
                        $link_from = env('JIRA_URL') . "/secure/attachment/{$item->from}/{$item->fromString}";
                        $this->changelog[$item->field]['from'] = "<a href='{$link_from}' style='margin-right: 5px;'>{$item->fromString}</a>";
                    }
                    break;
                default:
                    $this->changelog[$item->field]['to'] = $item->toString ?? 'не назначено';
                    if (!empty($item->fromString)) {
                        $this->changelog[$item->field]['from'] = $item->fromString;
                    }
                    break;
            }
        }
    }

    public function getAssignee($displayName)
    {
        $assignee = "Исполнитель: ";
        if (isset($this->changelog['assignee']['from'])) {
            $assignee .= $this->changelog['assignee']['from'] . ' -> ';
        } else {
            $assignee .= 'не назначено -> ';
        }
        if (isset($this->changelog['assignee']['to'])) {
            $displayName = $this->changelog['assignee']['to'];
        } elseif ($displayName == null) {
            $displayName = 'ERR';
        }
        $assignee .= "{$displayName}.\n";
        unset($this->changelog['assignee']);
        return $assignee;
    }

    public function getStatus($statusName = 'Нет статуса')
    {
        $status = "Статус: ";
        if (isset($this->changelog['status']['from'])) {
            $status .= $this->changelog['status']['from'] . ' -> ';
        }
        if (isset($this->changelog['status']['to'])) {
            $statusName = $this->changelog['status']['to'];
        } elseif ($statusName == null) {
            $statusName = 'ERR';
        }
        $status .= "{$statusName}.\n";
        unset($this->changelog['status']);
        return $status;
    }

    public function getIssueEventTypeName($eventTypeName)
    {
        $eventTypeNamesList = [
            "issue_created" => "Была создана задача.\n",
//            "issue_assigned" => "Задача была назначена новому пользователю.\n",
//            "issue_resolved" => "Задача была решена.\n",
//            "issue_closed" => "Задача была закрыта.\n",
            "issue_commented" => "В задаче добавлен комментарий.\n",
            "issue_comment_edited" => "Комментарий был изменён.\n",
//            "issue_reopened" => "Задача была вновь открыта\n",
            "issue_deleted" => "Задача была удалена.\n",
            "issue_moved" => "Задачу была перемещена в другой проект.\n",
            "issue_worklogged" => "Добавлена запись о работе.\n",
            "work_logged_on_issue" => "Добавлена запись о работе.\n",
//            "issue_workstarted" => "Исполнитель начал работу над задачей.\n",
//            "work_started_on_issue" => "Исполнитель начал работу над задачей.\n",
//            "issue_workstopped" => "Исполнитель закончил работу над задачей\n",
            "issue_worklog_updated" => "Изменена запись о работе в задаче.\n",
            "issue_worklog_deleted" => "Запись о работе была удалена.\n",
            "issue_updated" => "Обновление полей.\n",
            "issue_generic" => "Общее событие.\n",
            "issue_comment_deleted" => "Был удалён комментарий.\n",
        ];

        return $eventTypeNamesList[$eventTypeName] ?? '';
    }
}
